<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Ultimate Battleships - Live</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <style>
        body { background: #121212; color: #00FF00; font-family: sans-serif; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(5, 40px); gap: 5px; justify-content: center; margin: 20px; }
        .cell { width: 40px; height: 40px; border: 1px solid #444; background: #222; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white; }
        .hit { background: #ff4444 !important; }
        .miss { background: #4444ff !important; }
        .player-ship { border: 2px solid #00FF00; }
    </style>
</head>
<body>
    <h1>BATTLESHIPS: PLAYER VS COMPUTER</h1>
    <div id="status">YOUR TURN: Click the bottom grid to bomb the computer!</div>
    
    <h3>Your Fleet (Top)</h3>
    <div id="player-grid" class="grid"></div>
    <h3>Computer's Ocean (Click to Attack)</h3>
    <div id="cpu-grid" class="grid"></div>

    <script type="py">
import random
from pyscript import document

# Game State
size = 5
player_ships = set([(0,0), (1,2), (3,4)]) # Your starting ships
cpu_ships = set([(random.randint(0,4), random.randint(0,4)) for _ in range(3)])

def init_board():
    p_grid = document.getElementById("player-grid")
    c_grid = document.getElementById("cpu-grid")
    
    for r in range(size):
        for c in range(size):
            # Create Player Cell
            p_cell = document.createElement("div")
            p_cell.className = "cell"
            p_cell.id = f"p-{r}-{c}"
            if (r,c) in player_ships: p_cell.classList.add("player-ship")
            p_cell.innerText = "S" if (r,c) in player_ships else "~"
            p_grid.appendChild(p_cell)
            
            # Create Clickable CPU Cell
            c_cell = document.createElement("div")
            c_cell.className = "cell"
            c_cell.id = f"c-{r}-{c}"
            c_cell.innerText = "?"
            # This 'onclick' is what lets you drop the bomb
            c_cell.onclick = lambda e, row=r, col=c: player_attack(row, col)
            c_grid.appendChild(c_cell)

def player_attack(r, c):
    global cpu_ships
    cell = document.getElementById(f"c-{r}-{c}")
    status = document.getElementById("status")
    
    if (r, c) in cpu_ships:
        cell.classList.add("hit")
        cpu_ships.remove((r, c))
        status.innerText = "HIT! You get another shot!"
        if not cpu_ships: status.innerText = "VICTORY! ALL COMPUTER SHIPS SUNK!"
    else:
        cell.classList.add("miss")
        status.innerText = "MISS! Computer's turn..."
        computer_turn()

def computer_turn():
    r, c = random.randint(0,4), random.randint(0,4)
    cell = document.getElementById(f"p-{r}-{c}")
    if (r, c) in player_ships:
        cell.classList.add("hit")
        player_ships.remove((r,c))
    else:
        cell.classList.add("miss")

init_board()
    </script>
</body>
</html>cccbeegfvicggbcceigbuhdrkvekfldtvnvblbhuvd
